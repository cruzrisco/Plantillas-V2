% 
% Section 4
%
% Application of the template to changes in three families of experiments
%
In this section the template is applied to the definition of the changes made in the replications carried out in three series of experiments in the SE area that deal with: i) Mindfulness \cite{bernardez-jss-2016}; ii) Requirements analysis \cite{aranda2016estudio}, and; iii) Code evaluation techniques \cite{juristo2012comparing,juristo2003functional,juristo2013process}.

%
% Section 4.1
% Brief description of the families of experiments
%
\subsection{Brief description of the families of experiments}
\label{sec:brief}
The first series of replications to apply the template (fam\#1) has been chosen for being familiar with it, as it has been carried out by some of the authors of this work. The other two families (fam\#2, fam\#3) have been chosen for knowing the domain of the problem as they are close to our area of knowledge.
\subsubsection{A family of experiments on Mindfulness.}

The family (fam\#1) described in \cite{bernardez2014controlled,bernardez-jss-2016}, consists of one experiment and two internal replications carried out at the University of Seville by some of the authors of the present article. The study deals with the effect of the practice of \emph{Mindfulness} on the performance of students when developing conceptual models. \emph{Mindfulness} is a meditation technique aimed to increase clearness of mind and awareness.
%\input{Figuras/Fam1-Mind}
%In Appendix A, 
%The table \ref{tab:plantilla-mind}

This is the first instantiation of the template. When applying the template, the second replication has been defined based on the first replication. With its current structure we are able to make explicit the changes in the two replications cited. However, the template needs to be validated in replications of experiments carried out by other researchers.

\subsubsection{A family of experiments on Requirements Analysis.}

This is an empirical study about  the influence of analyst domain knowledge and experience on the effectiveness of \emph{requirements analysis} process. The family (fam\#2) consists of nine experiments involving postgraduate students at the Polytechnic University of Madrid, as well as professionals from different countries and institutions. The whole family is described in \cite{aranda2016estudio}.

According to the author, the acronyms for the experiments and replicactions are: Q-2007, Q-2009, Q-2011, Q-2012, E-2012A, E-2012B, E-2013, E-2014 and E-2015. Q-2007 is the original experiment. 
Each experiment is a replication of the previous one. Therefore, the template has been applied defining the changes in each replication with respect to the previous replication. %except the E-2015 experiment which is a replication of the E-2013. 
The first step in filling out the template is to identify on which experiment or previous replication the replication is defined.

\subsubsection{A family of experiments on Code Evaluation Techniques.}

It consists of one experiment and its four replications. The original experiment is conducted with students at the Polytechnic University of Madrid to evaluate the effectiveness of three verification and validation techniques. This experiment has been replicated in four different sites: the Polytechnic University of Madrid, the Polytechnic University of Valencia, the University of Seville and the ORT University of Uruguay. The complete family of experiments (fam\#3) is described in \cite{juristo2012comparing,juristo2003functional,juristo2013process}.
%\input{Figuras/Fam3-ORT-Eng.tex}
\input{Figuras/Fam3-ORT-EngV2.tex}
\input{Figuras/Fam-TChangesALE.tex}
\input{Figuras/Fam-TChangesVV.tex}

%The acronyms used to reference the original and the replications are VV-UPM, VV-UPM1, VV-UPV, VV-Uds and VV-ORT. 

All of the replications are described based on the original experiment.
To illustrate the use of the template, table \ref{tab:plantEng} shows the result of applying the template and L–patterns to define the changes made in one of the replications of this family, specifically in the replication carried out at the University of Uruguay.


%In Appendix A, tables Ta, Tb, Tc and Td  show the result of applying the template and L–patterns to define the changes of the replications of this series. 

%\subsubsection{Lessons learned} %\label{sec:LessonsVV}

%The table \ref{tab:plantilla-V2} shows the template with the modifications after its application to the three series of experiments.

%\input{Figuras/Fam-Tplantilla-LL.tex}
%\subsection{Purpose of the replications}

%\input{Figuras/Fam-TReplicaciones.tex}
%The template is applied to the first family of experiments. 
\subsection{Procedure for template validation}
\label{sec:procedure}
The application of the template to the three families of experiments is an iterative process. The following phases can be distinguished: 

\begin{itemize}
 \item The first family of experiments is surveyed. 
    \begin{itemize}
        \item For each replication, the template is instantiated.
        \item If there is any problem in the definition of any field of the template, it is noted (see Table \ref{tab:plantillaProblem}).
        \begin{itemize}
            \item For each change, if there is any problem in defining the change, it is analyzed and typified (see Table \ref{tab:tipos}).
            \item The change is associated with one or more of the typified values.
        \end{itemize}
       
        \item The impact of the problems detected in the template and in the metamodel is analysed (see Section \ref{sec:impact}). 
    \end{itemize}

  
 \item Repeat the process with the next family updating Table \ref{tab:plantillaProblem} and Table \ref{tab:tipos} when necessary.
\end{itemize}

\subsection{Findings on the application of the template}
\label{sec:findings}
Table \ref{tab:plantillaProblem} shows, over the template, the difficulties faced when filling in each of its fields.
%\input{Figuras/Fam-TplantillaProblem.tex}
\input{Figuras/Fam-TplantillaProblemV2.tex}
%\input{Figuras/Fam-TplantillaProblem2.tex}
\begin{itemize}

\item (1) Although replication is identified in the template by a code or acronym relating to the baseline experiment and followed by a sequential number, it is advisable to follow the author's notation if different.
\item (2) We realize the need to add the \emph{date} and \emph{site} where the replication is carried out to the template. A new \emph{site} dimension is identified in \cite{Juristo2012}; if replication is carried out at a \emph{site} other than the original experiment, the \emph{site} dimension is changed. Nevertheless, we consider \emph{site} as a template field and not as a new dimension.  
 
%\item When the change affects more than one dimension it is advisable to split into several simple changes

\item (3) Concerning the \emph{Purpose of Replication}, except for one of the replications in which its objective is not specified, the rest fits into one of the three possible values to be selected in the template. Purposes of replications of all the proposed types have been found.

\item (4) The \textit{quasi-experiments}, are included in the \textit{controlled experiments} category following \cite{wohlin:experimentation}, nevertheless, if the author defines replication as a \textit{quasi-experiment}, it should be reflected in the template (e.g. in the comments).
%\item The empirical method has been removed from the template and the use of the template is recommended only for \textit{controlled experiments}.  In \emph{surveys}, \emph{observational studies} and other types of empirical methods, most of the concepts in the template, such as independent variables, do not exist.

%The use of the template avoids the lack of information on the purpose of the replication.
\end{itemize}

\subsection{Impact of the findings on the template and metamodel}
\label{sec:impact}

The problems arising in the definition of changes in replications have been typified in order to be able to analyse whether they affect: i) the metamodel and, therefore, also the template and its L-patterns; ii) only the template and L-patterns (see Table \ref{tab:tipos}).

% shows the typified problems faced through the iterative process for template validation in the replications of each family. The solution to these problems involves changes in the metamodel or changes in the template or its L-patterns. On the other hand, the lack of information when describing the changes will benefit from the use of the template.

\subsubsection{Modifications to the metamodel:}
\begin{itemize}
    \item  Due to problem P4 (see Table 5), it is necessary to modify the metamodel. Changes in \emph{context variables} are included within the \emph{operationalization dimension}. \emph{Context variables} are independent variables that were controlled at a fixed level during the experiment \cite{wohlin:experimentation}.
    
    This modification in the metamodel has repercussions on the definition of the template and L-patterns.
%    \item  Add the \emph{"sequence of steps"} as one of the possible elements to modify in the \emph{protocol dimension}.
\end{itemize}

\subsubsection{Modifications to the template and L-patterns:}
\begin{itemize}
    \item Due to problem P1 (see Table \ref{tab:tipos}), it is necessary to modify the pattern of \emph{threats to validity} to reflect that there are changes that do not affect the validity. 
    
    The new L-pattern to describe the  \emph{threats to validity} is:
    
     The change  \{(\{increases\textbar decreases \} \\
     \{the construct  \textbar external \textbar internal \textbar conclusion\} validity) \\
     \textbar  not affect the validity \}  \\
\end{itemize}

\subsection{Analysis of missing information}
\label{sec:missing}

%Due to the difficulty of their specification, some of the fields of the template are optional.  
In the three families analysed, among the fields not specified by the authors, \emph{"reason for the change"} and \emph{ "threat to validity"} stand out.   
The number of changes incompletely defined with the template due to \emph{"missing information"} is 8 out of 59. However, these fields are easily identifiable by the researchers who carry out the replication and fill in the template.

In order to clearly document the changes it is necessary to fill in all the fields in the template. This leads us to reinforce the template by making the fields that were optional mandatory so that this information is not missing.
It supports the idea that the template is necessary so that replications are not \textbf{under-specified}. 

To facilitate the identification of the \emph{threat to validity}, in \cite{gomez2014understanding} the threats are identified based on changes in the experimental baseline.

\begin{itemize}
%\item \emph{Changing the experimenters} does not control any threat. It only ensures that the experimenters do not influence the results \cite{Juristo2012}.
\item \emph{Changing the protocol:} Internal validity is addressed. Results are independent of experimental conditions.
\item \emph{Changing the operationalization:} Construct validity is addressed. %Determine limits for Operationalizations (range of variation of treatments and measures used ) \cite{Juristo2012}.
\item \emph{Changing the population:} External validity is addressed. %Determine limits in the population properties \cite{Juristo2012}.

\end{itemize}
%\input{Figuras/Fam-TChangesSol.tex}
%\input{Figuras/Fam-TChangesSolV2.tex}
\input{Figuras/Fam-TChangesSolV3.tex}


\subsection{Summary of specified changes}
\label{sec:summary}

%\input{Figuras/Fam-Agrupa.tex}
\input{Figuras/Fam-AgrupaV2.tex}
 
 Table \ref{tab:agrupa} shows the changes defined fitting the template and those that have presented difficulties.
By analyzing this table, two types of situations can be identified:
\begin{itemize}
\item \textbf{Due to limitations in the template}. Implies a change in the template (e.g. modify the pattern of \emph{threats to validity} or consider \emph{context variables}). Some of these situations also result in changes in the metamodel.
\item  \textbf{Due to missing information }. This situation does not imply changes in the template.  It supports the idea that the template is necessary so that applications are not \textbf{under-specified}.
\end{itemize}

